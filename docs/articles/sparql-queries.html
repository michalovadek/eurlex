<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make SPARQL queries with eurlex • eurlex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Make SPARQL queries with eurlex">
<meta property="og:description" content="eurlex">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eurlex</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/council.html">Voting in the Council of the EU</a>
    </li>
    <li>
      <a href="../articles/eurlexpkg.html">eurlex: Retrieve data on European Union law in R</a>
    </li>
    <li>
      <a href="../articles/sparql-queries.html">Make SPARQL queries with eurlex</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/michalovadek/eurlex/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Make SPARQL queries with eurlex</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/michalovadek/eurlex/blob/HEAD/vignettes/sparql-queries.Rmd" class="external-link"><code>vignettes/sparql-queries.Rmd</code></a></small>
      <div class="hidden name"><code>sparql-queries.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://michalovadek.github.io/eurlex/" class="external-link">eurlex</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette shows how to use the <code>eurlex</code> R package to
make SPARQL queries to retrieve data on European Union law.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Dozens of political scientists and legal scholars use data on
European Union laws in their research. The provenance of these data is
rarely discussed. More often than not, researchers resort to the quick
and dirty technique of scraping entire html pages from
<code>eur-lex.europa.eu</code>. This is not the optimal, nor preferred
(from the perspective of the server host) approach of retrieving data,
however, especially as the Publication Office of the European Union, the
public body behind Eur-Lex, operates several dedicated APIs for
automated retrieval of its data.</p>
<p>The allure of web scraping is completely understandable. Not only is
it easier to download data that can be readily seen in a user-friendly
manner through a browser, using the dedicated APIs requires technical
knowledge of semantic web and Client URL technologies, which is not
necessarily widespread among researchers. And why go through the pain of
learning how to compile SPARQL queries when it is much easier to simply
download the web page?</p>
<p>The <code>eurlex</code> R package attempts to significantly reduce
the overhead associated with using the SPARQL and REST APIs made
available by the EU Publication Office. Although at present it does not
offer access to the same array of information as comprehensive web
scraping might, the package provides simpler, more efficient and
transparent access to data on European Union law. This vignette gives a
quick guide to the package and an even quicker introduction to the
Eur-Lex dataverse.</p>
</div>
<div class="section level2">
<h2 id="the-eurlex-package">The <code>eurlex</code> package<a class="anchor" aria-label="anchor" href="#the-eurlex-package"></a>
</h2>
<p>The <code>eurlex</code> package currently envisions the typical
use-case to consist of getting bulk information about EU law and policy
into R as fast as possible. The package contains three core functions to
achieve that objective: <code><a href="../reference/elx_make_query.html">elx_make_query()</a></code> to create SPARQL
queries based on user input; <code><a href="../reference/elx_run_query.html">elx_run_query()</a></code> to execute the
pre-made or any other manually input query; and
<code><a href="../reference/elx_fetch_data.html">elx_fetch_data()</a></code> to fire GET requests for certain metadata
to the REST API.</p>
<p>The package also contains largely self-explanatory functions for
retrieving data on EU court cases (<code><a href="../reference/elx_curia_list.html">elx_curia_list()</a></code>) and
Council votes (<code>elx_council_votes()</code>, currently
dysfunctional) from outside Eur-Lex. More advanced users might be
interested in downloading and custom-parsing XML notices with
<code><a href="../reference/elx_download_xml.html">elx_download_xml()</a></code>.</p>
<div class="section level3">
<h3 id="elx_make_query-generate-sparql-queries">
<code>elx_make_query()</code>: Generate SPARQL queries<a class="anchor" aria-label="anchor" href="#elx_make_query-generate-sparql-queries"></a>
</h3>
<p>The function <code>elx_make_query</code> takes as its first argument
the type of resource to be retrieved from the semantic database that
powers Eur-Lex (and other publications) called Cellar.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://michalovadek.github.io/eurlex/" class="external-link">eurlex</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">query_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"directive"</span><span class="op">)</span></span></code></pre></div>
<p>Currently, it is possible to choose from among a host of resource
types, including directives, regulations and even case law (see function
description for the full list). It is also possible to manually specify
a resource type from the <a href="http://publications.europa.eu/resource/authority/resource-type" class="external-link">eligible
list</a>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>The choice of resource type is then reflected in the SPARQL query
generated by the function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">query_dir</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex where{ ?work cdm:work_has_resource-type ?type. FILTER(?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR_IMPL&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR_DEL&gt;) </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span>
<span></span>
<span><span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"caselaw"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex where{ ?work cdm:work_has_resource-type ?type. FILTER(?type=&lt;http://publications.europa.eu/resource/authority/resource-type/JUDG&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/ORDER&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/OPIN_JUR&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/THIRDPARTY_PROCEED&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/GARNISHEE_ORDER&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RULING&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/JUDG_EXTRACT&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/INFO_JUDICIAL&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/VIEW_AG&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/OPIN_AG&gt;) </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span>
<span></span>
<span><span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"manual"</span>, manual_type <span class="op">=</span> <span class="st">"SWD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex where{ ?work cdm:work_has_resource-type ?type.FILTER(?type=&lt;http://publications.europa.eu/resource/authority/resource-type/SWD&gt;) </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span></code></pre></div>
<p>There are various ways of querying the same information in the Cellar
database due to the existence of several overlapping classes and
identifiers describing the same resources. The queries generated by the
function should offer a reliable way of obtaining exhaustive results, as
they have been validated by the helpdesk of the Publication Office. At
the same time, it is always possible there will be issues either on the
query or the database side; please report any you encounter through
Github.</p>
<p>The other arguments in <code><a href="../reference/elx_make_query.html">elx_make_query()</a></code> relate to
additional metadata to be returned. The results include by default the
<a href="https://eur-lex.europa.eu/content/tools/TableOfSectors/types_of_documents_in_eurlex.html" class="external-link">CELEX
number</a> and exclude corrigenda (corrections of errors in
legislation). Other data needs to be opted into. Make sure to select
ones that are logically compatible (e.g. case law does not have a legal
basis). More options should be added in the future.</p>
<p>Note that availability of data for each variable might have an impact
on the results. The data frame returned by the query might be shrunken
to the size of the variable with most missing data. It is recommended to
always compare results from a desired query to a minimal query
requesting only celex ids.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"directive"</span>, include_date <span class="op">=</span> <span class="cn">TRUE</span>, include_force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex ?date ?force where{ ?work cdm:work_has_resource-type ?type. FILTER(?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR_IMPL&gt;||</span></span>
<span><span class="co">#&gt;   ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/DIR_DEL&gt;) </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} OPTIONAL{?work cdm:work_date_document ?date.} OPTIONAL{?work cdm:resource_legal_in-force ?force.} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span>
<span></span>
<span><span class="co"># minimal query: elx_make_query(resource_type = "directive")</span></span>
<span></span>
<span><span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"recommendation"</span>, include_date <span class="op">=</span> <span class="cn">TRUE</span>, include_lbs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex ?date ?lbs ?lbcelex ?lbsuffix where{ ?work cdm:work_has_resource-type ?type. FILTER(?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_DEC&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_DIR&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_OPIN&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_RES&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_REG&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_RECO&gt;||</span></span>
<span><span class="co">#&gt;                    ?type=&lt;http://publications.europa.eu/resource/authority/resource-type/RECO_DRAFT&gt;) </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} OPTIONAL{?work cdm:work_date_document ?date.} OPTIONAL{?work cdm:resource_legal_based_on_resource_legal ?lbs.</span></span>
<span><span class="co">#&gt;     ?lbs cdm:resource_legal_id_celex ?lbcelex.</span></span>
<span><span class="co">#&gt;     OPTIONAL{?bn owl:annotatedSource ?work.</span></span>
<span><span class="co">#&gt;     ?bn owl:annotatedProperty &lt;http://publications.europa.eu/ontology/cdm#resource_legal_based_on_resource_legal&gt;.</span></span>
<span><span class="co">#&gt;     ?bn owl:annotatedTarget ?lbs.</span></span>
<span><span class="co">#&gt;     ?bn annot:comment_on_legal_basis ?lbsuffix}} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span>
<span></span>
<span><span class="co"># minimal query: elx_make_query(resource_type = "recommendation")</span></span></code></pre></div>
<p>You can also decide to not specify any resource types, in which case
all types of documents will be returned. As there are over a million
documents with a CELEX identifier, this is likely not efficient for a
majority of users. But since version 0.3.5 it is possible to request
documents belonging to a particular <a href="https://eur-lex.europa.eu/content/tools/TableOfSectors/types_of_documents_in_eurlex.html" class="external-link">“sector”</a>
or <a href="https://eur-lex.europa.eu/browse/directories/legislation.html" class="external-link">directory
code</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># request documents from directory 18 ("Common Foreign and Security Policy")</span></span>
<span><span class="co"># and sector 3 ("Legal acts")</span></span>
<span></span>
<span><span class="fu"><a href="../reference/elx_make_query.html">elx_make_query</a></span><span class="op">(</span>resource_type <span class="op">=</span> <span class="st">"any"</span>,</span>
<span>               directory <span class="op">=</span> <span class="st">"18"</span>,</span>
<span>               sector <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; PREFIX cdm: &lt;http://publications.europa.eu/ontology/cdm#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX annot: &lt;http://publications.europa.eu/ontology/annotation#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX skos:&lt;http://www.w3.org/2004/02/skos/core#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX dc:&lt;http://purl.org/dc/elements/1.1/&gt;</span></span>
<span><span class="co">#&gt;   PREFIX xsd:&lt;http://www.w3.org/2001/XMLSchema#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX rdf:&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span></span>
<span><span class="co">#&gt;   PREFIX owl:&lt;http://www.w3.org/2002/07/owl#&gt;</span></span>
<span><span class="co">#&gt;   select distinct ?work ?type ?celex where{</span></span>
<span><span class="co">#&gt;     VALUES (?value)</span></span>
<span><span class="co">#&gt;     { (&lt;http://publications.europa.eu/resource/authority/fd_555/18&gt;)</span></span>
<span><span class="co">#&gt;       (&lt;http://publications.europa.eu/resource/authority/dir-eu-legal-act/18&gt;)</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     {?work cdm:resource_legal_is_about_concept_directory-code ?value.</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     UNION</span></span>
<span><span class="co">#&gt;     {?work cdm:resource_legal_is_about_concept_directory-code ?directory.</span></span>
<span><span class="co">#&gt;       ?value skos:narrower+ ?directory.</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt;     ?work cdm:resource_legal_id_sector ?sector.</span></span>
<span><span class="co">#&gt;     FILTER(str(?sector)='3')</span></span>
<span><span class="co">#&gt;      </span></span>
<span><span class="co">#&gt;  FILTER not exists{?work cdm:work_has_resource-type &lt;http://publications.europa.eu/resource/authority/resource-type/CORRIGENDUM&gt;} OPTIONAL{?work cdm:resource_legal_id_celex ?celex.} FILTER not exists{?work cdm:do_not_index "true"^^&lt;http://www.w3.org/2001/XMLSchema#boolean&gt;}. }</span></span></code></pre></div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>Note, however, that not all resource types will work
properly with the pre-specified query.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michal Ovadek.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
